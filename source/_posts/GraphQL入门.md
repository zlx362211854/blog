---
title: GraphQL入门
date: 2019-09-10 14:56:53
tags:
---
<div class="post-block"><link itemprop="mainEntityOfPage" href="http://cmszlx.win/2019/09/10/GraphQL入门/"><span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="linXiao"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Hurry"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="REST-api"><a href="#REST-api" class="headerlink" title="REST api"></a>REST api</h3><ul><li>REST api简单来说就是将服务器资源定向到每个api上，比如localhost:8000/posts/1,对应查找文章的第一个，localhost:8000/comments/3,表示查找评论的第三条。REST的表达方式很简单，就是一条资源对应一个api，简洁明了。<h3 id="GraphQL-api"><a href="#GraphQL-api" class="headerlink" title="GraphQL api"></a>GraphQL api</h3></li><li>想象一个场景，前端需要查询一个用户的name,age,和用户发表的文章列表。传统api怎么设计？后端设计两个接口，一个查询用户信息，一个查询用户文章。前端调这两个接口，获得返回的信息，再把两个接口的数据组装起来。</li><li>能不能将上面的场景简化一些呢？前端只需要调一个接口，就可以查出用户的信息和用户的文章。</li><li>GraphQL 出现了。GraphQL api是一种特别灵活的api设计，他将传统的查询逻辑，交给了客户端。用代码举一个例子：<br><code>`</code>javascript<br>var express = require(‘express’);<br>var graphqlHTTP = require(‘express-graphql’);<br>var { buildSchema } = require(‘graphql’);<br>var schema = buildSchema(<code>type Query { name: String url: String, info: String }</code>);</li></ul><p>var root = {<br> name: () => ‘zlx’,<br> url: () => ‘<a href="https://avatars1.githubusercontent.com/u/22437181?v=4'" target="_blank" rel="noopener">https://avatars1.githubusercontent.com/u/22437181?v=4'</a>,<br> info: () => ‘a frontend developer’<br>};</p><p>var app = express();<br>app.use(‘/graphql’, graphqlHTTP({<br> schema: schema,<br> rootValue: root,<br> graphiql: true,<br>}));<br>app.listen(4000, () => console.log(‘Now browse to localhost:4000/graphql’));</p><precode language="" precodenum="0"></precode><p>name: String<br>url: String,<br>info: String</p><precode language="" precodenum="1"></precode><p>上面代码，在前端执行了查询，只查询name属性：<br><img src="https://user-images.githubusercontent.com/22437181/64590034-2eea9400-d3d9-11e9-92c7-420607f29751.png" alt="image"></p><p>如果我要查询name,url和info三条信息呢？<br>只需要在前端查询语句上加上对应的字段：</p><precode language="javascript" precodenum="2"></precode><p><img src="https://user-images.githubusercontent.com/22437181/64590096-504b8000-d3d9-11e9-8bc7-a181efdcb104.png" alt="image"><br>⚠️注：上面代码实现是javascript语言的GraphQL 实现，其他语言实现参考<a href="https://graphql.cn/code/" target="_blank" rel="noopener">这里</a><br>这就是GraphQL api，它使接口请求更加灵活，更加适用于复杂场景，也使后端查询设计更加简单，后端工程师只需要定义好数据库和相关的表结构的Schema，所有查询逻辑交给前端来处理，使开发变得高效。</p></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2019/09/06/daily/" rel="next" title="daily"><i class="fa fa-chevron-left"></i> daily </a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2019/09/12/什么是-Tree-Shaking/" rel="prev" title="什么是 Tree Shaking"> 什么是 Tree Shaking <i class="fa fa-chevron-right"></i></a></div></div></footer></div>
