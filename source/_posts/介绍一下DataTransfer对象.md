---
title: 介绍一下DataTransfer对象
date: 2019-08-08 14:56:27
tags:
---

<div class="post-block"><link itemprop="mainEntityOfPage" href="http://cmszlx.win/2019/08/08/介绍一下DataTransfer对象/"><span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="linXiao"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Hurry"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="1-元素的可拖拽属性"><a href="#1-元素的可拖拽属性" class="headerlink" title="1.元素的可拖拽属性"></a>1.元素的可拖拽属性</h3><p> html5中增加了元素拖拽的支持，只需要增加一个属性draggable：true后，元素就被赋予了可拖拽的能力。</p><p>当元素可拖拽后，可给元素添加6类拖拽事件监听：</p><ul><li>dragstart，开始拖拽事件。</li><li>dragenter， 拖拽进入事件。</li><li>dragleave， 拖拽离开事件。</li><li>dragover， 拖拽over事件。</li><li>drop，拖拽释放事件。</li><li>dragend， 拖拽结束事件。<h3 id="2-拖拽中的dataTransfer对象。"><a href="#2-拖拽中的dataTransfer对象。" class="headerlink" title="2. 拖拽中的dataTransfer对象。"></a>2. 拖拽中的dataTransfer对象。</h3><strong>dataTransfer</strong>对象，就是元素拖拽事件中的拖拽实例对象。</li></ul><p>如下，实现一个拖拽元素：</p><precode language="html" precodenum="0"></precode><precode language="javascript" precodenum="1"></precode><h3 id="3-DataTransfer的属性和方法"><a href="#3-DataTransfer的属性和方法" class="headerlink" title="3. DataTransfer的属性和方法"></a>3. DataTransfer的属性和方法</h3><p>DataTransfer对象包含下面5个标准属性和4个标准方法。</p><h4 id="标准属性"><a href="#标准属性" class="headerlink" title="标准属性"></a>标准属性</h4><p><strong>DataTransfer.dropEffect</strong><br>获取当前所选拖放操作的类型，或将拖拽操作设置为新类型。值必须为none，copy，link或move中的一个。<br><strong>DataTransfer.effectAllowed</strong><br>提供可能的所有类型的操作。必须是none，copy，copyLink，copyMove，link，linkMove，move，all或uninitialized中的一个。<br><strong>DataTransfer.files</strong><br>拖拽的本地文件列表。如果拖动操作不涉及拖动文件，则此属性为空列表。<br><strong>DataTransfer.items</strong> （只读）<br>提供DataTransferItemList对象，该对象是所有拖动数据的列表。<br><strong>DataTransfer.types</strong>（只读）<br>在dragstart事件中设置数据格式，返回的是一个字符串数组。</p><h4 id="标准方法"><a href="#标准方法" class="headerlink" title="标准方法"></a>标准方法</h4><p><strong>DataTransfer.clearData([format])</strong><br>删除与给定类型关联的数据。format参数是可选的。如果类型为空或未指定，则删除所有关联的数据。如果指定类型的数据不存在，或者数据传输不包含任何数据，则此方法无效。<br><strong>DataTransfer.getData(format)</strong><br>返回给定类型的数据，如果该类型的数据不存在或数据传输不包含数据，则返回空字符串。<br><strong>DataTransfer.setData(format, data)</strong><br>设置给定类型的数据。如果该类型的数据不存在，则在末尾添加，以使列表中的最后一项成为新格式类型。如果该类型的数据已存在，则在相同位置把现有数据替换掉。<br><strong>DataTransfer.setDragImage(img, xOffset, yOffset)</strong><br>设置用于拖动的自定义图像。</p><p>下面用元素拖拽实现一个拖拽上传的demo：</p><precode language="html" precodenum="2"></precode><precode language="javascript" precodenum="3"></precode><p><img src="https://user-images.githubusercontent.com/22437181/62682407-adc16b00-b9ee-11e9-99dc-95558aca0d54.gif" alt="upload4"></p><p><a href="https://github.com/zlx362211854/drag-upload" target="_blank" rel="noopener">demo代码仓库</a><br>用拖拽实现一个拖拽列表功能：</p><p><img src="https://raw.githubusercontent.com/zlx362211854/animate/master/image/drag.gif" alt="drag"></p><p><a href="https://github.com/zlx362211854/animate/tree/master/drag" target="_blank" rel="noopener">demo代码仓库</a></p></div><footer class="post-footer"><div class="post-tags"><a href="/tags/javascript/" rel="tag"># javascript</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2019/08/07/介绍下浏览器的重绘和回流（Repaint-Reflow）/" rel="next" title="介绍下浏览器的重绘和回流（Repaint & Reflow）"><i class="fa fa-chevron-left"></i> 介绍下浏览器的重绘和回流（Repaint & Reflow） </a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2019/08/16/箭头函数与普通函数（function）的区别是什么？/" rel="prev" title="箭头函数与普通函数（function）的区别是什么？"> 箭头函数与普通函数（function）的区别是什么？ <i class="fa fa-chevron-right"></i></a></div></div></footer></div>
