---
title: JavaScript-模块化是什么？
date: 2019-08-05 14:55:44
tags:
---
<div class="post-block"><link itemprop="mainEntityOfPage" href="http://cmszlx.win/2019/08/05/JavaScript-模块化是什么？/"><span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="linXiao"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Hurry"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span></span></div></header><div class="post-body" itemprop="articleBody"><blockquote><p>js在es6之前是没有模块化这一概念的<br>es6之前，js模块化有几种规范：CommonJS、AMD。</p></blockquote><p><strong>CommonJS</strong><br>CommonJS有一个全局方法require(),nodejs就是采用的CommonJS规范来实现的模块化：</p><precode language="javascript" precodenum="0"></precode><p>上面的代码可以看出来，其实这两行代码是同步的，第二行代码，必须要等第一行代码执行完毕才能执行，不然就会报错。<br>这就是CommonJS的特点，同步执行。<br>缺点也是同步导致的，如果在浏览器中使用CommonJS规范，因为浏览器加载资源会通过网络请求，所以如果客户端的网络很卡，那同步的模块加载就卡住了，很影响用户体验。所以浏览器中需要用异步模块规范。<br><strong>AMD</strong><br>AMD采用异步方式加载模块，模块的加载不影响它后面语句的运行，加载模块的时候，会定义一个回调函数，等待模块加载完毕后，会去调用这个函数，实现异步加载。</p><precode language="javascript" precodenum="1"></precode><blockquote><p>es6以后，js语言本身提供了模块化的实现，可以取代 CommonJS 和 AMD 规范，成为浏览器和服务器通用的模块解决方案：</p><precode language="javascript" precodenum="2"></precode><p>上面代码其实是一个import命令，import命令会被 JavaScript 引擎静态分析，先于模块内的其他语句执行，本质是从path模块加载一个path方法，其他方法不加载，这种加载称为“编译时加载”或者静态加载，即 ES6 可以在编译时就完成模块加载，效率要比 CommonJS 模块的加载方式高。<br>但是缺点来了，import命令是在编译阶段执行的，所以他能与js语法嵌套使用，比如：</p><precode language="javascript" precodenum="3"></precode><p>这样会报错。于是，就有了import()方法提案：</p><precode language="javascript" precodenum="4"></precode><p>这样，是不是跟AMD规范很像，其实import()函数就是js语言本身模块化的异步实现,并且返回一个Promise，来实现回调。</p></blockquote></div><footer class="post-footer"><div class="post-tags"><a href="/tags/javascript/" rel="tag"># javascript</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2019/08/05/什么是视差滚动？如何实现视差滚动的效果？/" rel="next" title="什么是视差滚动？如何实现视差滚动的效果？"><i class="fa fa-chevron-left"></i> 什么是视差滚动？如何实现视差滚动的效果？ </a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2019/08/05/什么是一致性hash算法，有什么用处？/" rel="prev" title="什么是一致性hash算法，有什么用处？"> 什么是一致性hash算法，有什么用处？ <i class="fa fa-chevron-right"></i></a></div></div></footer></div>
