---
title: js手动实现自定义事件监听
date: 2019-07-23 14:54:36
tags:
---
<div class="post-block"><link itemprop="mainEntityOfPage" href="http://cmszlx.win/2019/07/23/js手动实现自定义事件监听/"><span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="linXiao"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Hurry"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span><span class="post-meta-item-text">发表于</span><time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-23T11:42:20+08:00"> 2019年07月23日 </time></span></div></header><div class="post-body" itemprop="articleBody"><blockquote><p>js 手动实现自定义事件监听</p></blockquote><h3 id="自定义事件监听，其实也是观察者模式的一种"><a href="#自定义事件监听，其实也是观察者模式的一种" class="headerlink" title="自定义事件监听，其实也是观察者模式的一种"></a>自定义事件监听，其实也是观察者模式的一种</h3><p>我们在jquery中经常用</p><precode language="javascript" precodenum="0"></precode><p>来注册事件监听，那么他具体是怎么实现的呢，其实背后就是观察者模式的一种实现。</p><p>观察者模式，有几个要素:</p><ol><li><p>第一需要将需要观察的对象存放起来。</p></li><li><p>第二需要在需要的地方调用该观察者。</p></li><li><p>第三观察者需要分类，同一类的观察者可监听同一个事件，事件触发时，所有的观察者都需要被通知到。</p></li></ol><p>下面来具体实现一个观察者模式。</p><precode language="javascript" precodenum="1"></precode><p>上面代码里使用了es6 的Map对象来存储观察者。注册观察者的时候，每收到一个观察者注册，就按类型将他们分类存放，同一类的观察者存储在一个数组中。触发观察者的代码中，收到触发的命令后，找出触发的类型，调用所有已注册的同类的观察者。删除观察者，就将注册的所有观察者删除，return this方便链式调用。</p><p>调用示例如下：</p><precode language="javascript" precodenum="2"></precode><h3 id="如上便用观察者模式实现了一个事件监听机制。"><a href="#如上便用观察者模式实现了一个事件监听机制。" class="headerlink" title="如上便用观察者模式实现了一个事件监听机制。"></a>如上便用观察者模式实现了一个事件监听机制。</h3><p>源代码见github<a href="https://github.com/zlx362211854/listener" target="_blank" rel="noopener">链接</a></p></div><footer class="post-footer"><div class="post-tags"><a href="/tags/原创/" rel="tag"># 原创</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2019/03/25/js闭包和内存释放/" rel="next" title="js闭包和内存释放"><i class="fa fa-chevron-left"></i> js闭包和内存释放 </a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2019/07/30/js观察者模式如何实现/" rel="prev" title="js观察者模式如何实现"> js观察者模式如何实现 <i class="fa fa-chevron-right"></i></a></div></div></footer></div>
